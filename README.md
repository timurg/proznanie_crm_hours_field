# proznanie_crm_hours_field

## Описание

Это локальное приложение для Bitrix24, реализующее пользовательский тип поля CRM. Поле автоматически определяет регион и текущее локальное время клиента по номеру телефона, и выводит эти данные в карточке лида или сделки.

## Как работает

- Приложение интегрируется в карточку лида или сделки Bitrix24 как пользовательское поле.
- По номеру телефона, найденному в сущности или связанном контакте, определяется регион и часовой пояс клиента.
- В карточке отображаются три строки: регион, дата, текущее время клиента.
- В режиме редактирования поле недоступно для изменения вручную.

## Используемые данные

Используется открытая база диапазонов телефонных номеров РФ (`regionCodes.js`), содержащая соответствие телефонных кодов регионам и часовым поясам.

## Установка

1. Скопируйте файлы приложения в директорию на вашем сервере.
2. Подключите приложение к вашему порталу Bitrix24 как локальное приложение.

3. В файле `settings.php` обязательно укажите константу CRM_FIELD_TIME_HANDLER_URL с адресом обработчика, например:

   ```php
   define('CRM_FIELD_TIME_HANDLER_URL', 'https://yourdomain.ru/app_folder/app.php');
   ```

4. Укажите путь к приложению при создании пользовательского поля типа "Пользовательский компонент" (USERFIELD_TYPE) в CRM.

## Примечания

- Для корректной работы требуется наличие файла `regionCodes.js` (может быть большим, рекомендуется оптимизация загрузки).
- Приложение работает только в режиме просмотра карточки.
- Для работы необходим доступ к Bitrix24 REST API.

## Лицензия

Используется открытая база телефонных кодов. Исходный код приложения распространяется
